# Transcripts

A mobile-first web app for real-time audio transcription with AI-powered summaries. Record audio via microphone or upload files, get live speaker-attributed transcripts via Deepgram, and generate structured AI summaries with Claude.

## Features

- **Real-time transcription** — Record audio and see words appear live with speaker diarization
- **File upload** — Upload MP3, WAV, M4A, or WebM files for transcription
- **Speaker identification** — Automatic speaker diarization with editable labels
- **AI summaries** — Generate structured summaries with overview, key points, and action items (powered by Claude)
- **Transcript library** — Search, filter, star, and tag your transcripts
- **Audio playback** — Play back recordings with seek and speed controls (1x, 1.5x, 2x)
- **Export** — Download transcripts as PDF or TXT
- **Settings** — Choose transcription language and toggle auto-punctuation
- **Installable PWA** — Add to home screen on mobile devices

## Prerequisites

- [Node.js](https://nodejs.org/) 18+
- A free [Convex](https://www.convex.dev/) account
- A [Deepgram](https://deepgram.com/) API key (free tier available)
- (Optional) An [Anthropic](https://www.anthropic.com/) API key for AI summaries

## Setup

### 1. Clone the repository

```bash
git clone https://github.com/<your-username>/ai-audio-transcription-app.git
cd ai-audio-transcription-app
```

### 2. Install dependencies

```bash
npm install
```

### 3. Set up Convex

Create a free account at [convex.dev](https://www.convex.dev/) if you don't have one, then initialize your backend:

```bash
npx convex dev
```

This will:
- Prompt you to log in to Convex (or create an account)
- Create a new Convex project
- Generate your `.env.local` file with `CONVEX_DEPLOYMENT` and `NEXT_PUBLIC_CONVEX_URL`
- Deploy your backend functions and database schema
- Start watching for changes

Leave this terminal running. Open a new terminal for the next steps.

### 4. Get a Deepgram API key

1. Sign up at [console.deepgram.com](https://console.deepgram.com/)
2. Create a new API key with **Member** permissions
3. Set it as a Convex environment variable:

```bash
npx convex env set DEEPGRAM_API_KEY <your-deepgram-key>
```

4. Also add it to your `.env.local` file:

```
DEEPGRAM_API_KEY=<your-deepgram-key>
```

### 5. (Optional) Get an Anthropic API key

This enables the AI summary feature (overview, key points, action items). The app works fine without it — you just won't be able to generate summaries.

1. Sign up at [console.anthropic.com](https://console.anthropic.com/)
2. Create an API key
3. Set it as a Convex environment variable:

```bash
npx convex env set ANTHROPIC_API_KEY <your-anthropic-key>
```

### 6. Run the development server

In a separate terminal from `npx convex dev`:

```bash
npm run dev
```

Open [http://localhost:3000](http://localhost:3000) in your browser.

### 7. Create an account

The app uses password-based authentication. Sign up with an email and password on the login screen to get started.

## Environment Variables

| Variable | Where | Required | Description |
|----------|-------|----------|-------------|
| `CONVEX_DEPLOYMENT` | `.env.local` | Yes | Auto-generated by `npx convex dev` |
| `NEXT_PUBLIC_CONVEX_URL` | `.env.local` | Yes | Auto-generated by `npx convex dev` |
| `DEEPGRAM_API_KEY` | `.env.local` + Convex env | Yes | Deepgram speech-to-text API key |
| `ANTHROPIC_API_KEY` | Convex env only | No | Anthropic API key for AI summaries |

**Note:** `DEEPGRAM_API_KEY` needs to be set in both `.env.local` (for local dev) and as a Convex environment variable (`npx convex env set`). `ANTHROPIC_API_KEY` only needs to be set as a Convex environment variable since it's only used in server-side Convex actions.

## Mobile Builds (Capacitor)

The app supports native Android and iOS builds via Capacitor.

### Android

Requires JDK 21 and Android Studio.

```bash
# Build web assets and sync to native project
npm run cap:build

# Open in Android Studio
npm run cap:open:android
```

Or build from the command line:

```bash
export JAVA_HOME="/path/to/your/jdk-21"
npm run cap:build
cd android && ./gradlew assembleDebug
```

### iOS

Requires Xcode and a Mac.

```bash
npm run cap:build
npm run cap:open:ios
```

## Tech Stack

- **Frontend:** [Next.js](https://nextjs.org/) 15, [React](https://react.dev/) 19, [Tailwind CSS](https://tailwindcss.com/), [Zustand](https://zustand.docs.pmnd.rs/)
- **Backend:** [Convex](https://www.convex.dev/) (real-time database, serverless functions, auth, file storage)
- **Transcription:** [Deepgram](https://deepgram.com/) Nova-2
- **AI Summaries:** [Anthropic Claude](https://www.anthropic.com/) Haiku 4.5
- **Animation:** [Motion](https://motion.dev/)
- **Mobile:** [Capacitor](https://capacitorjs.com/) (iOS + Android)
- **Export:** [jsPDF](https://github.com/parallax/jsPDF)

## Project Structure

```
app/                    Next.js frontend
  (auth)/               Login and signup pages
  (app)/                Protected app routes (record, transcripts, settings)
  components/           React components (audio, library, export, navigation)
  lib/                  Hooks, stores, and utilities
convex/                 Backend (serverless functions + database schema)
  schema.ts             Database tables and indexes
  deepgram.ts           Deepgram transcription integration
  ai.ts                 Claude AI summary generation
  transcripts.ts        Transcript CRUD operations
  auth.ts               Authentication setup
public/                 Static assets and PWA manifest
```

## License

MIT
